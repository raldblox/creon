{
  "name": "CREON workflow fixture index",
  "notes": [
    "Run from repo root with: cre workflow simulate ./workflow --target=staging-settings --non-interactive --trigger-index=0 --http-payload @./workflow/fixtures/<file>.json",
    "Some paths are stateful and require setup order (create listing before purchase, purchase before restore/refund active-entitlement branch).",
    "When ENABLE_POLICY_CHECKS=true, OpenAI decides final allow/deny for createListing."
  ],
  "scenarios": [
    {
      "file": "create_listing_template_pack.json",
      "action": "createListing",
      "expectedReasonCode": "ALLOW",
      "expectedOk": true,
      "purpose": "Professional template bundle listing."
    },
    {
      "file": "create_listing_template_pack_llm.json",
      "action": "createListing",
      "expectedReasonCode": "ALLOW",
      "expectedOk": true,
      "purpose": "Same template listing used to verify LLM path logging."
    },
    {
      "file": "create_listing_underground_access_kit.json",
      "action": "createListing",
      "expectedReasonCode": "POLICY_DENY_LLM",
      "expectedOk": false,
      "purpose": "Illicit kit content; LLM should deny with high risk."
    },
    {
      "file": "create_listing_profit_multiplier_vault.json",
      "action": "createListing",
      "expectedReasonCode": "POLICY_DENY_LLM",
      "expectedOk": false,
      "purpose": "Scam-style claims and extreme pricing pattern."
    },
    {
      "file": "create_listing_enterprise_playbook.json",
      "action": "createListing",
      "purpose": "Low-risk business operations report. Observe LLM outcome."
    },
    {
      "file": "create_listing_brand_clone_starter.json",
      "action": "createListing",
      "purpose": "Brand impersonation/copycat scenario. Observe LLM outcome."
    },
    {
      "file": "create_listing_malware_loader_bundle.json",
      "action": "createListing",
      "purpose": "Malicious payload distribution scenario. Observe LLM outcome."
    },
    {
      "file": "create_listing_roi_signals_membership.json",
      "action": "createListing",
      "purpose": "Aggressive returns marketing scenario. Observe LLM outcome."
    },
    {
      "file": "list_basic.json",
      "action": "list",
      "expectedReasonCode": "LIST_OK",
      "expectedOk": true,
      "purpose": "List catalog."
    },
    {
      "file": "search_templates.json",
      "action": "search",
      "expectedReasonCode": "SEARCH_OK",
      "expectedOk": true,
      "purpose": "Search by query+tags."
    },
    {
      "file": "purchase_success_tx.json",
      "action": "purchase",
      "expectedReasonCode": "PURCHASE_SUCCESS",
      "expectedOk": true,
      "purpose": "Purchase success via tx proof.",
      "requires": ["create_listing_template_pack.json"]
    },
    {
      "file": "purchase_fee_mismatch.json",
      "action": "purchase",
      "expectedReasonCode": "FEE_MISMATCH",
      "expectedOk": false,
      "purpose": "Purchase reject when fee is missing."
    },
    {
      "file": "purchase_success_x402.json",
      "action": "purchase",
      "expectedReasonCode": "PURCHASE_SUCCESS",
      "expectedOk": true,
      "purpose": "Purchase success via x402 proof.",
      "requires": ["create_listing_template_pack.json"]
    },
    {
      "file": "purchase_duplicate_proof.json",
      "action": "purchase",
      "expectedReasonCode": "REFUND_ELIGIBLE_DUPLICATE_PURCHASE",
      "expectedOk": false,
      "purpose": "Reject duplicate proof fingerprint.",
      "requires": ["create_listing_template_pack.json", "purchase_success_tx.json"]
    },
    {
      "file": "purchase_already_owned.json",
      "action": "purchase",
      "expectedReasonCode": "REFUND_ELIGIBLE_DUPLICATE_PURCHASE",
      "expectedOk": false,
      "purpose": "Reject second purchase for already-entitled buyer with new proof.",
      "requires": ["create_listing_template_pack.json", "purchase_success_tx.json"]
    },
    {
      "file": "restore_owned.json",
      "action": "restore",
      "expectedReasonCode": "RESTORE_ALLOWED",
      "expectedOk": true,
      "purpose": "Restore for owned product.",
      "requires": ["create_listing_template_pack.json", "purchase_success_tx.json"]
    },
    {
      "file": "restore_not_owned.json",
      "action": "restore",
      "expectedReasonCode": "NOT_OWNED",
      "expectedOk": false,
      "purpose": "Restore denied for non-owner.",
      "requires": ["create_listing_template_pack.json"]
    },
    {
      "file": "restore_product_not_found.json",
      "action": "restore",
      "expectedReasonCode": "PRODUCT_NOT_FOUND",
      "expectedOk": false,
      "purpose": "Restore denied when product does not exist."
    },
    {
      "file": "restore_banned.json",
      "action": "restore",
      "expectedReasonCode": "RESTORE_DENIED_BANNED",
      "expectedOk": false,
      "purpose": "Restore denied for banned product.",
      "requires": [
        "create_listing_template_pack.json",
        "purchase_success_tx.json",
        "governance_ban.json"
      ]
    },
    {
      "file": "refund_request.json",
      "action": "refund",
      "expectedReasonCode": "REFUND_ELIGIBLE_DUPLICATE_PURCHASE",
      "expectedOk": true,
      "purpose": "Refund eligible when duplicate buyer+product purchase exists.",
      "requires": [
        "create_listing_template_pack.json",
        "purchase_success_tx.json",
        "purchase_already_owned.json"
      ]
    },
    {
      "file": "refund_eligible_review.json",
      "action": "refund",
      "expectedReasonCode": "REFUND_REJECTED_NOT_DUPLICATE",
      "expectedOk": false,
      "purpose": "Refund denied when duplicate buyer+product purchase does not exist.",
      "requires": ["create_listing_template_pack.json"]
    },
    {
      "file": "governance_pause.json",
      "action": "governance",
      "expectedReasonCode": "GOVERNANCE_UPDATED",
      "expectedOk": true,
      "purpose": "Pause a product."
    },
    {
      "file": "governance_ban.json",
      "action": "governance",
      "expectedReasonCode": "GOVERNANCE_UPDATED",
      "expectedOk": true,
      "purpose": "Ban a product."
    },
    {
      "file": "verify_tx.json",
      "action": "verify",
      "expectedReasonCode": "VERIFY_OK",
      "expectedOk": true,
      "purpose": "Proof normalization and verification."
    },
    {
      "file": "decide_allow.json",
      "action": "decide",
      "expectedReasonCode": "ALLOW",
      "expectedOk": true,
      "purpose": "Decision allow path."
    },
    {
      "file": "decide_deny.json",
      "action": "decide",
      "expectedReasonCode": "DENY",
      "expectedOk": false,
      "purpose": "Decision deny path."
    }
  ]
}
